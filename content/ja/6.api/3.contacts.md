---
title: 連絡先API
description: FluenzR REST APIで連絡先を管理します。
---

# 連絡先API

連絡先の作成、読み取り、更新、削除のエンドポイント。

## Contactオブジェクト

```json
{
  "id": "con_abc123",
  "email": "taro.yamada@example.com",
  "firstName": "太郎",
  "lastName": "山田",
  "company": "Acme Corp",
  "jobTitle": "営業部長",
  "phone": "+81312345678",
  "website": "https://acme.com",
  "status": "active",
  "groups": [
    {
      "id": "grp_xyz789",
      "name": "LinkedInリード"
    }
  ],
  "tags": ["見込み客", "fintech"],
  "customFields": {
    "sector": "Fintech",
    "company_size": "50-100"
  },
  "pipelineStage": {
    "id": "stg_qualified",
    "name": "絞り込み済み"
  },
  "createdAt": "2025-01-15T10:30:00Z",
  "updatedAt": "2025-01-15T14:45:00Z"
}
```

## 連絡先一覧

ページネーション付きの連絡先一覧を取得します。

```
GET /contacts
```

### クエリパラメータ

| パラメータ | 型 | 説明 |
|-----------|------|-------------|
| `page` | integer | ページ番号（デフォルト: 1） |
| `perPage` | integer | ページあたりの件数（デフォルト: 20、最大: 100） |
| `email` | string | メールでフィルタリング（部分一致） |
| `status` | string | ステータスでフィルタリング |
| `groupId` | string | グループでフィルタリング |
| `tag` | string | タグでフィルタリング |
| `sort` | string | ソートフィールド |
| `order` | string | ascまたはdesc |

### 例

```bash
curl -X GET "https://api.fluenzr.co/v1/contacts?groupId=grp_xyz789&status=active&perPage=50" \
  -H "Authorization: Bearer flz_sk_xxx"
```

### レスポンス

```json
{
  "success": true,
  "data": [
    {
      "id": "con_abc123",
      "email": "taro.yamada@example.com",
      "firstName": "太郎",
      ...
    },
    ...
  ],
  "meta": {
    "page": 1,
    "perPage": 50,
    "total": 234,
    "totalPages": 5
  }
}
```

## 連絡先の取得

特定の連絡先の詳細を取得します。

```
GET /contacts/:id
```

### 例

```bash
curl -X GET "https://api.fluenzr.co/v1/contacts/con_abc123" \
  -H "Authorization: Bearer flz_sk_xxx"
```

### レスポンス

```json
{
  "success": true,
  "data": {
    "id": "con_abc123",
    "email": "taro.yamada@example.com",
    ...
  }
}
```

## 連絡先の作成

新しい連絡先を作成します。

```
POST /contacts
```

### リクエストボディ

| フィールド | 型 | 必須 | 説明 |
|-------|------|--------|-------------|
| `email` | string | ✅ | メールアドレス（一意） |
| `firstName` | string | | 名 |
| `lastName` | string | | 姓 |
| `company` | string | | 会社 |
| `jobTitle` | string | | 役職 |
| `phone` | string | | 電話番号 |
| `website` | string | | ウェブサイト |
| `groupIds` | array | | グループID |
| `tags` | array | | タグ一覧 |
| `customFields` | object | | カスタムフィールド |
| `pipelineStageId` | string | | パイプラインステージID |

### 例

```bash
curl -X POST "https://api.fluenzr.co/v1/contacts" \
  -H "Authorization: Bearer flz_sk_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "hanako.suzuki@startup.io",
    "firstName": "花子",
    "lastName": "鈴木",
    "company": "StartupIO",
    "jobTitle": "CEO",
    "groupIds": ["grp_xyz789"],
    "tags": ["見込み客", "saas"],
    "customFields": {
      "sector": "SaaS",
      "company_size": "10-50"
    }
  }'
```

### レスポンス（201 Created）

```json
{
  "success": true,
  "data": {
    "id": "con_def456",
    "email": "hanako.suzuki@startup.io",
    ...
  }
}
```

### 想定されるエラー

| コード | メッセージ | 説明 |
|------|---------|-------------|
| 400 | Email is required | メールが未入力 |
| 400 | Invalid email format | メール形式が無効 |
| 409 | Email already exists | メールが既に使用されている |

## 連絡先の更新

既存の連絡先を更新します。

```
PUT /contacts/:id
```

### リクエストボディ

作成時と同じフィールド。提供されたフィールドのみが更新されます。

### 例

```bash
curl -X PUT "https://api.fluenzr.co/v1/contacts/con_abc123" \
  -H "Authorization: Bearer flz_sk_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "jobTitle": "VP Sales",
    "customFields": {
      "company_size": "100-500"
    }
  }'
```

### レスポンス

```json
{
  "success": true,
  "data": {
    "id": "con_abc123",
    "jobTitle": "VP Sales",
    ...
  }
}
```

## 連絡先の削除

連絡先を完全に削除します。

```
DELETE /contacts/:id
```

### 例

```bash
curl -X DELETE "https://api.fluenzr.co/v1/contacts/con_abc123" \
  -H "Authorization: Bearer flz_sk_xxx"
```

### レスポンス（200 OK）

```json
{
  "success": true,
  "data": {
    "id": "con_abc123",
    "deleted": true
  }
}
```

## 一括作成

1つのリクエストで複数の連絡先を作成します。

```
POST /contacts/bulk
```

### リクエストボディ

```json
{
  "contacts": [
    {
      "email": "contact1@example.com",
      "firstName": "連絡先",
      "lastName": "1"
    },
    {
      "email": "contact2@example.com",
      "firstName": "連絡先",
      "lastName": "2"
    }
  ],
  "groupIds": ["grp_xyz789"],
  "onDuplicate": "skip"
}
```

| パラメータ | 説明 |
|-----------|-------------|
| `contacts` | 連絡先の配列（最大1000） |
| `groupIds` | 全員に割り当てるグループ |
| `onDuplicate` | 重複時のアクション：`skip`、`update` |

### 例

```bash
curl -X POST "https://api.fluenzr.co/v1/contacts/bulk" \
  -H "Authorization: Bearer flz_sk_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "contacts": [
      {"email": "a@example.com", "firstName": "A"},
      {"email": "b@example.com", "firstName": "B"}
    ],
    "onDuplicate": "skip"
  }'
```

### レスポンス

```json
{
  "success": true,
  "data": {
    "created": 2,
    "updated": 0,
    "skipped": 0,
    "errors": []
  }
}
```

## 連絡先検索

連絡先の高度な検索。

```
POST /contacts/search
```

### リクエストボディ

```json
{
  "query": "example.com",
  "filters": {
    "status": "active",
    "groups": ["grp_xyz789"],
    "customFields": {
      "sector": "Fintech"
    }
  },
  "sort": {
    "field": "createdAt",
    "order": "desc"
  }
}
```

### 例

```bash
curl -X POST "https://api.fluenzr.co/v1/contacts/search" \
  -H "Authorization: Bearer flz_sk_xxx" \
  -H "Content-Type: application/json" \
  -d '{
    "filters": {
      "customFields": {
        "sector": "Fintech"
      }
    }
  }'
```

## 連絡先のグループ管理

### グループに追加

```
POST /contacts/:id/groups
```

```json
{
  "groupIds": ["grp_abc", "grp_def"]
}
```

### グループから削除

```
DELETE /contacts/:id/groups
```

```json
{
  "groupIds": ["grp_abc"]
}
```

## タグ管理

### タグの追加

```
POST /contacts/:id/tags
```

```json
{
  "tags": ["vip", "priority"]
}
```

### タグの削除

```
DELETE /contacts/:id/tags
```

```json
{
  "tags": ["priority"]
}
```
