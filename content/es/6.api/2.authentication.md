---
title: Autenticación API
description: Aprende cómo autenticarte con la API de FluenzR.
---

# Autenticación API

La API de FluenzR utiliza claves API para la autenticación.

## Obtener una clave API

### Requisitos previos

- Plan **Pro** activo
- Derechos de administrador en la cuenta

### Generar una clave

1. Inicia sesión en FluenzR
2. Ve a **Configuración** > **API**
3. Haz clic en **Generar una nueva clave**
4. Dale un nombre descriptivo a la clave
5. Copia inmediatamente la clave mostrada

> **Advertencia**
La clave solo se muestra una vez. Guárdala en un lugar seguro. Si la pierdes, tendrás que generar una nueva.

## Usar la clave API

### Encabezado de autorización

Incluye tu clave API en el encabezado `Authorization` de cada solicitud:

```bash
curl -X GET "https://api.fluenzr.co/v1/contacts" \
  -H "Authorization: Bearer flz_sk_your_api_key_here" \
  -H "Content-Type: application/json"
```

### Formato de la clave

Las claves API de FluenzR siguen este formato:

```
flz_sk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

- `flz`: Prefijo de FluenzR
- `sk`: Clave secreta
- `xxx...`: 32 caracteres alfanuméricos

## Ejemplos por lenguaje

### cURL

```bash
curl -X GET "https://api.fluenzr.co/v1/contacts" \
  -H "Authorization: Bearer flz_sk_abc123..." \
  -H "Content-Type: application/json"
```

### JavaScript (fetch)

```javascript
const response = await fetch('https://api.fluenzr.co/v1/contacts', {
  headers: {
    'Authorization': 'Bearer flz_sk_abc123...',
    'Content-Type': 'application/json'
  }
});

const data = await response.json();
```

### JavaScript (axios)

```javascript
import axios from 'axios';

const client = axios.create({
  baseURL: 'https://api.fluenzr.co/v1',
  headers: {
    'Authorization': 'Bearer flz_sk_abc123...'
  }
});

const { data } = await client.get('/contacts');
```

### Python (requests)

```python
import requests

headers = {
    'Authorization': 'Bearer flz_sk_abc123...',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.fluenzr.co/v1/contacts',
    headers=headers
)

data = response.json()
```

### PHP

```php
<?php
$ch = curl_init();

curl_setopt_array($ch, [
    CURLOPT_URL => 'https://api.fluenzr.co/v1/contacts',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_HTTPHEADER => [
        'Authorization: Bearer flz_sk_abc123...',
        'Content-Type: application/json'
    ]
]);

$response = curl_exec($ch);
$data = json_decode($response, true);
```

### Ruby

```ruby
require 'net/http'
require 'json'

uri = URI('https://api.fluenzr.co/v1/contacts')
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

request = Net::HTTP::Get.new(uri)
request['Authorization'] = 'Bearer flz_sk_abc123...'
request['Content-Type'] = 'application/json'

response = http.request(request)
data = JSON.parse(response.body)
```

## Gestionar tus claves API

### Ver claves existentes

En **Configuración** > **API**, consulta la lista de tus claves:

| Nombre | Creada | Último uso | Acciones |
|--------|--------|------------|----------|
| Producción | 01/01/2025 | 10/01/2025 | Revocar |
| Dev/Test | 05/01/2025 | 08/01/2025 | Revocar |

### Revocar una clave

1. Haz clic en **Revocar** junto a la clave
2. Confirma la revocación

> **Peligro**
La revocación es inmediata e irreversible. Todas las aplicaciones que usen esta clave dejarán de funcionar.

### Buenas prácticas

#### Una clave por entorno

| Entorno | Clave | Permisos |
|---------|-------|----------|
| Producción | flz_sk_prod_xxx | Todos |
| Staging | flz_sk_stag_xxx | Todos |
| Desarrollo | flz_sk_dev_xxx | Solo lectura |

#### Nunca exponer las claves

**Nunca hacer:**
- Hacer commit en un repositorio Git
- Incluir del lado del cliente (frontend)
- Compartir por correo/chat

**Siempre hacer:**
- Usar variables de entorno
- Almacenar en un gestor de secretos
- Mantener solo del lado del servidor

#### Variables de entorno

```bash
# .env (no hacer commit)
FLUENZR_API_KEY=flz_sk_abc123...
```

```javascript
// Node.js
const apiKey = process.env.FLUENZR_API_KEY;
```

```python
# Python
import os
api_key = os.environ.get('FLUENZR_API_KEY')
```

## Errores de autenticación

### 401 Unauthorized

```json
{
  "success": false,
  "error": {
    "code": "UNAUTHORIZED",
    "message": "Invalid or missing API key"
  }
}
```

**Causas posibles:**
- Clave API faltante
- Clave API inválida
- Clave API revocada

### 403 Forbidden

```json
{
  "success": false,
  "error": {
    "code": "FORBIDDEN",
    "message": "API access requires Pro plan"
  }
}
```

**Causas posibles:**
- Plan Free o Starter (API no disponible)
- Clave API sin los permisos necesarios

## Seguridad

### Rotación de claves

Cambia tus claves API regularmente:

1. Genera una nueva clave
2. Actualiza tus aplicaciones
3. Verifica que todo funciona
4. Revoca la clave antigua

### Monitoreo

Supervisa el uso de tus claves:
- Verifica el "último uso" regularmente
- Identifica claves no utilizadas
- Detecta usos sospechosos

### En caso de compromiso

Si una clave está comprometida:

1. **Revoca inmediatamente** la clave en FluenzR
2. Genera una nueva clave
3. Actualiza tus aplicaciones
4. Analiza los logs para detectar uso malicioso
5. Contacta con soporte si es necesario
